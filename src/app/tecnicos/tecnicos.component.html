
<div class="content-wrapper">
  <br class="visible-xs" />
  <br class="visible-xs" />
  <form #registroForm="ngForm">
    <section class="content">
      <div class="row">
        <div class="col-md-12">
          <div class="box">
            <div class="box-header with-border">
              <h3 class="box-title negritas">Nuevo técnico</h3>
              <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse">
                  <i class="fa fa-minus"></i>
                </button>
              </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
              <div class="col-xs-12" style="padding:0">
                <div class="form-group col-md-4">
                  <mat-form-field class="full-width">
                    <input type="text" matInput id="noalmacen" name="noalmacen" [(ngModel)]="almacen" #noalmacen="ngModel" placeholder="Número de almacen" required (ngModelChange)="validacion_form($event)">
                  </mat-form-field>
                  <div *ngIf="noalmacen.invalid && (noalmacen.dirty || noalmacen.touched)"
                       class="alert alert-danger">
                    <div *ngIf="noalmacen.errors.required">
                      Número de almacen requerido.
                    </div>
                  </div>
                </div>
                <div class="form-group col-md-8">
                  <label>Actividad</label><br />
                  <mat-checkbox *ngFor='let value of tiposervicio; trackBy: index;' style="padding-right:10px"
                                value="value.id"
                                (change)="check($event, value.id)">
                    {{value.desc_tipo_servicio}}
                  </mat-checkbox>
                  <!--<mat-checkbox style="padding-right:10px"
                                [(ngModel)]="previsita"
                                #actividad="ngModel"
                                value="1"
                                (change)="check($event, 1)">
                    Instalación
                  </mat-checkbox>
                  <br class="visible-xs" />
                  <mat-checkbox style="padding-right:10px"
                                [(ngModel)]="instalacion"
                                name="cb"
                                value="2"
                                (change)="check($event, 2)">
                    Mantenimiento
                  </mat-checkbox>
                  <br class="visible-xs" />
                  <mat-checkbox style="padding-right:10px"
                                [(ngModel)]="reparacion"
                                name="cb"
                                value="3"
                                (change)="check($event, 3)">
                    Reparación
                  </mat-checkbox>
                  <br class="visible-xs" />
                  <mat-checkbox style="padding-right:10px"
                                [(ngModel)]="profesional"
                                name="cb"
                                value="4"
                                (change)="check($event, 5)">
                    Diagnóstico en taller
                  </mat-checkbox>-->
                  <div class="alert alert-danger" *ngIf="validar">
                    <div>
                      {{message}}
                    </div>
                  </div>
                </div>

              </div>

              <div class="form-group col-md-4">
                <mat-form-field class="full-width">
                  <input type="text" matInput id="nombre" name="nombre" [(ngModel)]="name" #nombre="ngModel" placeholder="Nombres(s)" required (ngModelChange)="validacion_form($event)">
                </mat-form-field>
                <div *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)"
                     class="alert alert-danger">
                  <div *ngIf="nombre.errors.required">
                    Nombres(s) requerido.
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <mat-form-field class="full-width">
                  <input type="text" matInput id="aparteno" name="aparteno" #aparteno="ngModel" [(ngModel)]="paterno" placeholder="Apellido paterno" required (ngModelChange)="validacion_form($event)">
                </mat-form-field>
                <div *ngIf="aparteno.invalid && (aparteno.dirty || aparteno.touched)"
                     class="alert alert-danger">
                  <div *ngIf="aparteno.errors.required">
                    Apellido paterno requerido.
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <mat-form-field class="full-width">
                  <input type="text" matInput id="amaterno" name="amaterno" #amaterno="ngModel" [(ngModel)]="materno" placeholder="Apellido materno">
                </mat-form-field>
              </div>
              <div class="col-xs-12" style="padding:0;">
                <div class="form-group col-md-4">
                  <mat-form-field class="full-width">
                    <input type="text" matInput id="mail" name="mail" #mail="ngModel" [(ngModel)]="email" (ngModelChange)="validacion_form($event)" placeholder="Email" required pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$">
                  </mat-form-field>
                  <div *ngIf="mail.invalid && (mail.dirty || mail.touched)"
                       class="alert alert-danger">
                    <div *ngIf="mail.errors.required">
                      Email requerido.
                    </div>
                    <div *ngIf="mail.errors && mail.errors.pattern">
                      El Email no es valido (ej. ej@do.com)
                    </div>
                  </div>
                </div>
                <div class="form-group col-md-4">
                  <mat-form-field class="full-width">
                    <input [textMask]="{mask: mask, guide: false}" type="text" matInput name="telefono" [(ngModel)]="telefono" placeholder="Télefono fijo">
                  </mat-form-field>
                </div>
                <div class="form-group col-md-4">
                  <mat-form-field class="full-width">
                    <input [textMask]="{mask: mask, guide: false}" type="text" matInput id="movil" name="movil" #movil="ngModel" [(ngModel)]="celular" (ngModelChange)="validacion_form($event)" placeholder="Télefono celular" required>
                  </mat-form-field>
                  <div *ngIf="movil.invalid && (movil.dirty || movil.touched)"
                       class="alert alert-danger">
                    <div *ngIf="movil.errors.required">
                      Télefono celular requerido.
                    </div>
                    <!--<div *ngIf="movil.errors && movil.errors.pattern">
                      Télefono celular solo puede contener números.
                    </div>--<!--pattern="[0-9]+"-->

                  </div>
                </div>
              </div>

              <!--<div class="form-group col-md-4">
                <label>Tipo de técnico</label>
                <select type="text" class="form-control" id="tecnico" name="tecnico" #tecnico="ngModel" [(ngModel)]="tipotecnico" (ngModelChange)="validacion_form($event)" required>
                  <option *ngFor='let value of tipo; trackBy: index;' value="{{value.id}}">{{value.desc_tipo}}</option>

                </select>
                <div *ngIf="tecnico.invalid && (tecnico.dirty || tecnico.touched)"
                     class="alert alert-danger">
                  <div *ngIf="tecnico.errors.required">
                    Tipo de técnico requerido.
                  </div>
                </div>
              </div>-->
              <!--<div class="form-group col-md-4">
                <label>Área de cobertura</label>
                <tag-input [(ngModel)]="tipocobertura" name="cobertura"
                           [addOnBlur]="true"
                           [clearOnBlur]="true"
                           [onRemoving]="onRemoving"
                           [onAdding]="onAdding">
                  <tag-input-dropdown [autocompleteItems]="autocompleteItems"
                                      [displayBy]="'name'"
                                      [identifyBy]="'id'">
                  </tag-input-dropdown>
                </tag-input>
              </div>-->
              <!--<mat-form-field class="demo-chip-list">
                <mat-chip-list #chipList>
                  <mat-chip *ngFor="let fruit of fruits"
                            [selectable]="selectable"
                            [removable]="removable"
                            (removed)="remove(fruit)" style="background-color:aqua;">
                    {{fruit.name}}
                    <mat-icon matChipRemove *ngIf="removable">X</mat-icon>
                  </mat-chip>
                  <input placeholder="New fruit..."
                         #fruitInput
                         [formControl]="fruitCtrl"
                         [matAutocomplete]="auto"
                         [matChipInputFor]="chipList"
                         [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                         [matChipInputAddOnBlur]="addOnBlur"
                         (matChipInputTokenEnd)="add($event)" />
                </mat-chip-list>
                <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                  <mat-option *ngFor="let fruit of filteredFruits | async" [value]="fruit">
                    {{ fruit.name }}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>-->
              <!--<div class="form-group col-md-8">
                <label>Área de cobertura</label><br />
                <mat-checkbox style="padding-right:10px"
                              [(ngModel)]="region1"
                              name="cb"
                              value="1"
                              (change)="check_cobertura($event, 1)">
                  Región 1
                </mat-checkbox>
                <mat-checkbox style="padding-right:10px"
                              [(ngModel)]="region2"
                              name="cb"
                              value="2"
                              (change)="check_cobertura($event, 2)">
                  Región 2
                </mat-checkbox>
                <mat-checkbox style="padding-right:10px"
                              [(ngModel)]="region3"
                              name="cb"
                              value="3"
                              (change)="check_cobertura($event, 3)">
                  Región 3
                </mat-checkbox>
                <mat-checkbox style="padding-right:10px"
                              [(ngModel)]="region4"
                              name="cb"
                              value="4"
                              (change)="check_cobertura($event, 4)">
                  Región 4
                </mat-checkbox>
                <br class="visible-xs" />
                <mat-checkbox style="padding-right:10px"
                              [(ngModel)]="region5"
                              name="cb"
                              value="5"
                              (change)="check_cobertura($event, 5)">
                  Región 5
                </mat-checkbox>
                <mat-checkbox style="padding-right:10px"
                              [(ngModel)]="region6"
                              name="cb"
                              value="6"
                              (change)="check_cobertura($event, 6)">
                  Región 6
                </mat-checkbox>
                <div class="alert alert-danger" *ngIf="validar_cobertura">
                  <div>
                    {{message}}
                  </div>
                </div>
              </div>-->
              <div class="form-group col-md-12 col-xs-12 text-left">
                <label>Productos</label><br />
                <div *ngFor='let value of values; trackBy: index;' class="col-md-4">
                  <mat-slide-toggle class="example-margin"
                                    name="{{ value.descripcion }}"
                                    [color]="color"
                                    [checked]="false"
                                    [disabled]="disabled"
                                    (change)="slide($event, value.id, value.descripcion)">
                    {{ value.codigo }} - {{ value.descripcion }}
                  </mat-slide-toggle>
                </div>
              </div>
              <div class="col-xs-12 alert alert-danger" *ngIf="validar_slide">
                <div class="col-xs-12">
                  {{message_slide}}
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-12 text-center" style="margin-bottom:10px">
            <div class="alert" [className]="aviso" *ngIf="validform_responde">
              <span>{{message_response}}</span>
            </div>
          </div>
          <div class="col-xs-12 text-center">
            <button type="submit" (click)="registro($event)" class="pull-center btn btn-default btn-default-rojo" [disabled]="validform">
              Guardar
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <br class="visible-xs" />
            <br class="visible-xs" />
            <button type="button" class="pull-center btn btn-default" id="sendEmail" (click)="registroForm.resetForm({})">
              Cancelar
            </button>
          </div>
          <!-- /.box -->
        </div>
        <!-- /.col -->
      </div>
    </section>
    <!-- /.content -->
  </form>
</div>
